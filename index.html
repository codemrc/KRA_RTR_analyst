<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undian 5 Digit</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .number-display {
            font-size: 48px;
            margin-bottom: 20px;
        }
        .button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            margin: 5px;
        }
        .history {
            margin-top: 20px;
        }
        .history-item {
            font-size: 24px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <h1>Undian 5 Digit</h1>
    <div class="number-display" id="numberDisplay">00000</div>
    <button class="button" onclick="generateNumber()">Acak Nomor</button>
    <button class="button" onclick="clearNumbers()">Bersihkan</button>

    <div class="history">
        <h2>Nomor yang sudah keluar:</h2>
        <div id="history"></div>
    </div>

    <script>
        // Fungsi untuk menghasilkan nomor acak 5 digit
        function generateNumber() {
            let randomNumber = Math.floor(10000 + Math.random() * 90000); // Nomor acak 5 digit
            let drawnNumbers = getDrawnNumbers();

            // Jika nomor sudah ada di dalam history, generate ulang
            while (drawnNumbers.includes(randomNumber)) {
                randomNumber = Math.floor(10000 + Math.random() * 90000);
            }

            // Simpan nomor yang dihasilkan
            drawnNumbers.push(randomNumber);
            localStorage.setItem('drawnNumbers', JSON.stringify(drawnNumbers));

            // Tampilkan nomor undian
            document.getElementById('numberDisplay').innerText = randomNumber;

            // Tampilkan riwayat nomor
            displayHistory();
        }

        // Fungsi untuk mendapatkan nomor yang sudah pernah ditarik dari localStorage
        function getDrawnNumbers() {
            const numbers = localStorage.getItem('drawnNumbers');
            return numbers ? JSON.parse(numbers) : [];
        }

        // Fungsi untuk menampilkan riwayat nomor yang sudah keluar
        function displayHistory() {
            const historyDiv = document.getElementById('history');
            const drawnNumbers = getDrawnNumbers();

            historyDiv.innerHTML = '';
            drawnNumbers.forEach(number => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerText = number;
                historyDiv.appendChild(historyItem);
            });
        }

        // Fungsi untuk menghapus semua nomor yang sudah keluar
        function clearNumbers() {
            const password = prompt("Masukkan kata sandi untuk menghapus nomor yang sudah keluar:");
            if (password === "HANTARU") {
                // Hapus data dari localStorage
                localStorage.removeItem('drawnNumbers');
                alert("Nomor yang sudah keluar berhasil dihapus.");
                displayHistory(); // Perbarui tampilan
                document.getElementById('numberDisplay').innerText = '00000'; // Reset tampilan nomor
            } else {
                alert("Kata sandi salah!");
            }
        }

        // Tampilkan riwayat saat halaman pertama kali dimuat
        window.onload = function() {
            displayHistory();
        };
    </script>
    
</body>
</html>
